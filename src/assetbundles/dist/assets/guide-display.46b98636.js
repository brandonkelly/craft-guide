var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,n=(e,n)=>{for(var d in n||(n={}))a.call(n,d)&&i(e,d,n[d]);if(t)for(var d of t(n))l.call(n,d)&&i(e,d,n[d]);return e};import{d,r,e as o,c as s,a as u,b as p,j as c,o as g,q as m}from"./vendor.eec5045f.js";import{_ as v,l as h,g as y}from"./CraftFieldSelect.3bd4e4b1.js";import{_ as S}from"./SvgSettings.a395006e.js";var f=d({name:"PlacementInlineEditor",components:{CraftFieldSelect:v},props:{placementId:String,placementInlineEditor:{type:String,required:!0}},setup:e=>{const t=r({guides:y,guideValue:null,placement:null,placementSaved:!1});return t.placement={access:"all",group:"uiElement",groupId:e.placementInlineEditor,guideId:null,id:parseFloat(e.placementId)||null,portalMethod:"append",selector:null,theme:"default",uri:null},n({},o(t))},computed:{guideFieldOptions(){const e=[{label:"Select One",value:"__none__"}];return this.guides.forEach((t=>{e.push({label:t.title,value:t.slug})})),e}},methods:{async deletePlacement(){var e,t;(null==(e=this.placement)?void 0:e.id)&&await(null==(t=window.Craft)?void 0:t.postActionRequest("guide/placement/delete-placement",{data:JSON.stringify(this.placement)},((e,t,a)=>{var l,i,n,d;h("Deleting placement",e,t,a),this.placementSaved=!0,"success"===e.status?null==(i=null==(l=window.Craft)?void 0:l.cp)||i.displayNotice("Guide removed"):null==(d=null==(n=window.Craft)?void 0:n.cp)||d.displayError(e.data.error)})))},onGroupChanged(e){this.guideValue=e},onSaveClicked(){"__none__"===this.guideValue?this.deletePlacement():this.savePlacement()},async savePlacement(){var e;const t=this.guides.find((e=>e.slug===this.guideValue));t&&(this.placement.guideId=t.id),await(null==(e=window.Craft)?void 0:e.postActionRequest("guide/placement/save-placement",{data:JSON.stringify(this.placement)},((e,t,a)=>{var l,i,n,d;h("Saving placement",e,t,a),this.placementSaved=!0,"success"===e.status?null==(i=null==(l=window.Craft)?void 0:l.cp)||i.displayNotice("Guide UI Element updated"):null==(d=null==(n=window.Craft)?void 0:n.cp)||d.displayError(e.data.error)})))}},mounted(){this.$refs.guideField.setFieldValue(this.guideFieldOptions[0].value),h("PlacementInlineEditor loaded")}});const C={key:0},b={key:0},I={key:0},E={key:1},w={key:1},_={key:2},O=u("p",null,"No guides have been created yet. Create a guide and then return here to select it for this UI Element.",-1);f.render=function(e,t,a,l,i,n){const d=c("CraftFieldSelect");return e.placementInlineEditor?(g(),s("div",C,[e.placementSaved?(g(),s("div",b,["__none__"===e.guideValue?(g(),s("p",I,"Guide removed. Please reload this page and select another guide.")):(g(),s("p",E,"Guide added. Please reload this page to see the guide displayed here."))])):e.guides.length?(g(),s("div",w,[u(d,{ref:"guideField",instructions:"Select a guide to be displayed here.",label:"Guide",name:"guide",options:e.guideFieldOptions,onValueChanged:e.onGroupChanged},null,8,["options","onValueChanged"]),u("button",{class:"btn submit",type:"button",onClick:t[1]||(t[1]=(...t)=>e.onSaveClicked&&e.onSaveClicked(...t))},"Save")])):(g(),s("div",_,[O]))])):p("",!0)};var N=d({name:"GuideDisplay",delimiters:["${","}"],components:{PlacementInlineEditor:f,SvgSettings:S},props:{enableInlineEditor:Boolean,guideDisplay:{type:String,required:!0},guideNavData:String,startInInlineEditor:{type:Boolean,required:!1},teleportContainerClass:String,teleportMethod:String,teleportSelector:String},setup:e=>{const t=r({currentGuide:"",guideNav:e.guideNavData?JSON.parse(e.guideNavData):[],showInlineEditor:!1});return n({},o(t))},computed:{teleportTarget(){return this.teleportSelector?`#teleport-${this.guideDisplay}`:null}},methods:{},created(){var e;(null==(e=this.guideNav)?void 0:e.length)&&(this.currentGuide=this.guideNav[0].slug),this.showInlineEditor=this.startInInlineEditor},mounted(){h("GuideDisplay loaded")}});const P=document.querySelectorAll("[data-guide-display]");P&&P.forEach((e=>{var t,a,l,i;if(null==(t=e.dataset)?void 0:t.guideDisplay){if(null==(a=e.dataset)?void 0:a.teleportSelector){const t=document.querySelector(e.dataset.teleportSelector);if(t){const a=document.createElement("div");a.id=`teleport-${e.dataset.guideDisplay}`,(null==(l=e.dataset)?void 0:l.teleportContainerClass)&&a.setAttribute("class",e.dataset.teleportContainerClass),"append"===(null==(i=e.dataset)?void 0:i.teleportMethod)?t.appendChild(a):t.insertBefore(a,t.firstChild)}}N.template=`#${e.dataset.guideDisplay}`,m(n({},N),e.dataset).mount(e)}}));
