var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,l=(e,l)=>{for(var d in l||(l={}))a.call(l,d)&&i(e,d,l[d]);if(t)for(var d of t(l))n.call(l,d)&&i(e,d,l[d]);return e};import{d,r as o,e as r,c as s,a as u,b as c,k as p,o as g,u as m}from"./vendor.4b64b203.js";import{_ as h,l as v,g as y}from"./CraftFieldSelect.633afd5b.js";var S=d({name:"PlacementInlineEditor",components:{CraftFieldSelect:h},props:{placementId:String,placementInlineEditor:{type:String,required:!0}},setup:e=>{const t=o({guides:y,guideValue:null,placement:null,placementSaved:!1});return t.placement={access:"all",group:"uiElement",groupId:e.placementInlineEditor,guideId:null,id:parseFloat(e.placementId)||null,portalMethod:"append",selector:null,uri:null},l({},r(t))},computed:{guideFieldOptions(){const e=[{label:"Select One",value:"__none__"}];return this.guides.forEach((t=>{e.push({label:t.title,value:t.slug})})),e}},methods:{async deletePlacement(){var e,t;(null==(e=this.placement)?void 0:e.id)&&await(null==(t=window.Craft)?void 0:t.postActionRequest("guide/placement/delete-placement",{data:JSON.stringify(this.placement)},((e,t,a)=>{v("Deleting placement",e,t,a),this.placementSaved=!0})))},onGroupChanged(e){this.guideValue=e},onSaveClicked(){"__none__"===this.guideValue?this.deletePlacement():this.savePlacement()},async savePlacement(){var e;const t=this.guides.find((e=>e.slug===this.guideValue));t&&(this.placement.guideId=t.id),await(null==(e=window.Craft)?void 0:e.postActionRequest("guide/placement/save-placement",{data:JSON.stringify(this.placement)},((e,t,a)=>{v("Saving placement",e,t,a),this.placementSaved=!0})))}},mounted(){this.$refs.guideField.setFieldValue(this.guideFieldOptions[0].value),v("PlacementInlineEditor loaded")}});const f={key:0},b={key:0},C={key:0},I={key:1},k={key:1},w={key:2},E=u("p",null,"No guides have been created yet. Create a guide and then return here to select it for this UI Element.",-1);S.render=function(e,t,a,n,i,l){const d=p("CraftFieldSelect");return e.placementInlineEditor?(g(),s("div",f,[e.placementSaved?(g(),s("div",b,["__none__"===e.guideValue?(g(),s("p",C,"Guide removed. Please reload this page and select another guide.")):(g(),s("p",I,"Guide added. Please reload this page to see the guide displayed here."))])):e.guides.length?(g(),s("div",k,[u(d,{ref:"guideField",required:"",instructions:"Select a guide to be displayed here.",label:"Guide",name:"guide",options:e.guideFieldOptions,onValueChanged:e.onGroupChanged},null,8,["options","onValueChanged"]),u("button",{class:"btn submit",type:"button",onClick:t[1]||(t[1]=(...t)=>e.onSaveClicked&&e.onSaveClicked(...t))},"Save")])):(g(),s("div",w,[E]))])):c("",!0)};const O={},_={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},P=u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},null,-1),D=u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1);O.render=function(e,t){return g(),s("svg",_,[P,D])};var F=d({name:"GuideDisplay",delimiters:["${","}"],components:{PlacementInlineEditor:S,SvgSettings:O},props:{enableInlineEditor:Boolean,guideDisplay:{type:String,required:!0},guideNavData:String,startInInlineEditor:{type:Boolean,required:!1},teleportContainerClass:String,teleportMethod:String,teleportSelector:String},setup:e=>{const t=o({currentGuide:"",guideNav:e.guideNavData?JSON.parse(e.guideNavData):[],showInlineEditor:!1});return l({},r(t))},computed:{teleportTarget(){return this.teleportSelector?`#teleport-${this.guideDisplay}`:null}},methods:{},created(){var e;(null==(e=this.guideNav)?void 0:e.length)&&(this.currentGuide=this.guideNav[0].slug),this.showInlineEditor=this.startInInlineEditor},mounted(){v("GuideDisplay loaded")}});const N=document.querySelectorAll("[data-guide-display]");N&&N.forEach((e=>{var t,a,n,i;if(null==(t=e.dataset)?void 0:t.guideDisplay){if(null==(a=e.dataset)?void 0:a.teleportSelector){const t=document.querySelector(e.dataset.teleportSelector);if(t){const a=document.createElement("div");a.id=`teleport-${e.dataset.guideDisplay}`,(null==(n=e.dataset)?void 0:n.teleportContainerClass)&&a.setAttribute("class",e.dataset.teleportContainerClass),"append"===(null==(i=e.dataset)?void 0:i.teleportMethod)?t.appendChild(a):t.insertBefore(a,t.firstChild)}}F.template=`#${e.dataset.guideDisplay}`,m(l({},F),e.dataset).mount(e)}}));
