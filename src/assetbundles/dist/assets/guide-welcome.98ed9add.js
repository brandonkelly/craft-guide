var t=Object.defineProperty,e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(e,o,i)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i,n=(t,n)=>{for(var a in n||(n={}))o.call(n,a)&&s(t,a,n[a]);if(e)for(var a of e(n))i.call(n,a)&&s(t,a,n[a]);return t};import{d as a,r,e as c,z as l,P as d,S as h,C as g,A as m,H as b,D as p,O as u,W as k,B as f,G as v,c as w,a as y,o as z,p as x,k as S,i as C,m as j,j as B,q as L}from"./vendor.eec5045f.js";import{d as O,l as W,_ as T}from"./CraftFieldSelect.3bd4e4b1.js";import{_ as M}from"./CraftFieldText.68212f21.js";var U=a({name:"WelcomeAnimation",components:{},props:{aspectRatio:{type:String,default:"16 / 9"},sceneBackgroundUrl:String,sceneSettings:String},setup(t){const e=r({animationXDirection:1,book:null,bookLoose:null,bookLooseTextureUrl:new URL("/guide-thank-you.png",window.location),bookLoose2:null,bookTop:null,animationState:"intro",hasBeenInteractedWith:!1,devMode:O,objectUrl:new URL("/guide-book.gltf",window.location),resizeObserver:null,settings:{animation:{rotation:{x:0,y:0,z:0,xSineMax:0}},camera:{fov:60,near:.1,far:30,position:{x:0,y:10,z:0},rotation:{x:0,y:0,z:0}},lights:{ambient:{groundColor:2236962,intensity:1,skyColor:16777215},directional:{color:16777215,intensity:4,position:{x:10,y:10,z:10}}},object:{scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}},scene:{bgColor:"rgb(35, 31, 32)"}}});return n({},c(e))},computed:{aspect(){const t=this.aspectRatio.split(" ");return parseFloat(t[2])/parseFloat(t[0])*100+"%"}},methods:{animateOpenBook(){if(this.bookTop&&this.bookLoose&&this.bookLoose2){this.hasBeenInteractedWith=!0,this.animationState="animating";const t=3;l.to(this.bookTop.rotation,{duration:t,z:1.9,ease:"elastic.out(1, 0.3)",onComplete:()=>{this.animationState="opened"}}),l.to(this.bookLoose.rotation,{duration:t,z:.15,ease:"elastic.out(1, 0.3)"}),l.to(this.bookLoose2.rotation,{duration:t,z:.02,ease:"elastic.out(1, 0.3)"})}},animateCloseBook(){if(this.bookTop&&this.bookLoose&&this.bookLoose2){this.hasBeenInteractedWith=!0,this.animationState="animating";const t=1;l.to(this.bookTop.rotation,{duration:t,z:0,ease:"power4.in",onComplete:()=>{this.animationState="closed"}}),l.to(this.bookLoose.rotation,{duration:t,z:-.05,ease:"power4.in"}),l.to(this.bookLoose2.rotation,{duration:t,z:-.05,ease:"power4.in"})}},animateSlideInBook(){if(this.book){this.animationState="animating";const t=.7;l.to(this.book.position,{duration:t,x:0,startAt:{x:-10},ease:"power2.out",onComplete:()=>{this.animationState="closed"}}),l.to(this.book.rotation,{duration:t,y:Math.random()-.5,startAt:{y:Math.random()-.5},ease:"power2.out"}),setTimeout((()=>{this.hasBeenInteractedWith||this.animateOpenBook()}),3e3)}},init(){let t;const e=this.$refs.sceneContainer,o=this.settings.camera.fov,i=e.clientWidth/e.clientHeight,s=this.settings.camera.near,n=this.settings.camera.far,a=new d(o,i,s,n);a.position.set(this.settings.camera.position.x,this.settings.camera.position.y,this.settings.camera.position.z),a.rotation.set(this.settings.camera.rotation.x,this.settings.camera.rotation.y,this.settings.camera.rotation.z);const r=new h;r.background=new g(this.settings.scene.bgColor),this.sceneBackgroundUrl&&(r.background=(new m).load(this.sceneBackgroundUrl));const c=new b(this.settings.lights.ambient.skyColor,this.settings.lights.ambient.groundColor,this.settings.lights.ambient.intensity),l=new p(this.settings.lights.directional.color,this.settings.lights.directional.intensity);l.position.set(this.settings.lights.directional.position.x,this.settings.lights.directional.position.y,this.settings.lights.directional.position.z),r.add(c,l),new u(a,e);const w=new k({antialias:!0});w.setSize(e.clientWidth,e.clientHeight),w.setPixelRatio(window.devicePixelRatio),w.outputEncoding=f,w.physicallyCorrectLights=!0,e.appendChild(w.domElement),a.aspect=e.clientWidth/e.clientHeight,a.updateProjectionMatrix(),w.setSize(e.clientWidth,e.clientHeight);(new v).load(this.objectUrl.href,(e=>{if(t=e,t.scene.scale.set(this.settings.object.scale.x,this.settings.object.scale.y,this.settings.object.scale.z),t.scene.rotation.set(this.settings.object.rotation.x,this.settings.object.rotation.y,this.settings.object.rotation.z),r.add(t.scene),this.devMode){const e=[];t.scene.traverse((t=>{e.push(t)})),W("Scened objects",e)}this.book=t.scene.getObjectByName("Scene"),this.bookTop=t.scene.getObjectByName("Top"),this.bookLoose=t.scene.getObjectByName("Loose"),this.bookLoose2=t.scene.getObjectByName("Loose_2"),this.bookLoose&&(this.bookLoose.texture=(new m).load(this.bookLooseTextureUrl.href),this.bookLoose.texture.encoding=f,this.bookLoose.texture.flipY=!1),this.animateSlideInBook(),W("Objects from scene",this.bookTop,this.bookLoose,this.bookLoose2)}),void 0,void 0),w.setAnimationLoop((()=>{t&&w.render(r,a)})),this.resizeObserver=new ResizeObserver((t=>{for(let o of t)e.clientWidth,e.clientHeight,o.contentBoxSize?Array.isArray(o.contentBoxSize)?o.contentBoxSize[0]:o.contentBoxSize:(o.contentRect.width,o.contentRect.height),a.aspect=e.clientWidth/e.clientHeight,a.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight);console.log("Size changed")})),this.resizeObserver&&this.resizeObserver.observe(this.$refs.sceneContainer)},onContainerClicked(){"opened"===this.animationState?this.animateCloseBook():"closed"===this.animationState&&this.animateOpenBook()}},mounted(){W("WelcomeAnimation loaded",this.settings,JSON.stringify(this.settings)),this.init()},beforeUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}});const A={class:"g-relative"};U.render=function(t,e,o,i,s,n){return z(),w("div",A,[y("div",{id:"scene-container",ref:"sceneContainer",class:"g-absolute g-inset-0",onClick:e[1]||(e[1]=(...e)=>t.onContainerClicked&&t.onContainerClicked(...e))},null,512)])};const P={},I={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},R=y("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"},null,-1);P.render=function(t,e){return z(),w("svg",I,[R])};const H={},F={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},N=y("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1);H.render=function(t,e){return z(),w("svg",F,[N])};var _=a({name:"GuideWelcome",components:{CraftFieldSelect:T,CraftFieldText:M,SvgPlay:P,SvgPause:H,WelcomeAnimation:U},props:{skipUrl:String},setup:()=>{const t=r({devMode:O});return n({},c(t))},computed:{},methods:{},mounted(){W("GuideWelcome loaded")}});const E=j("data-v-7897201d");x("data-v-7897201d");const G={class:"g-fixed g-inset-0 g-w-full g-h-screen g-bg-white g-z-[500]"},D={class:"g-grid g-grid-rows-[var(--grid-rows)] g-h-full",style:{"--grid-rows":"1fr auto"}},V={class:"g-flex g-items-center g-justify-between g-p-6 g-bg-matrix-titlebar"},$=y("div",null,null,-1);S();const q=E(((t,e,o,i,s,n)=>{const a=B("WelcomeAnimation");return z(),w(C,{to:"body"},[y("div",G,[y("div",D,[y(a,{class:"g-object-cover g-overflow-hidden"}),y("div",V,[$,y("a",{class:"btn submit icon go",href:t.skipUrl},"Skip",8,["href"])])])])])}));_.render=q,_.__scopeId="data-v-7897201d";const J=document.getElementById("guide-welcome");J&&L(_,n({},J.dataset)).mount(J);
